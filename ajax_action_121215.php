


<html>
<head>
  <title>Review's</title>
  <link rel="stylesheet" type="text/css" href="menu_items_info.css">
<style type="text/css">
body{
  background-color: #4D2121;
}
.de{
  background-color:black;
}
.cat_menu{
      background-color: black;
    width: 20%;
    height: auto;
    text-transform: capitalize;
}
.res_cate{
  background-color: balck;
  color: white;
  float: right;
  display: inline-block;
}
.inner_right_box
{
  
    width: 65%;
}

.cat_sub_menu
{
  
  color: #000;
  float: left;
  
}


.for_item_type
{
  background-color: #906767;
  color: #fff;
  
  text-align: center;
  font-size: 17px;
  font-weight: 700;
  
    
}

.left_contentt
{
  width: 60%;
    
    height: auto;
    display: inline-block;
    float: left;
}


.results_menu_details
{
  border-radius: 4px;
    -webkit-box-shadow: 0 1px 2px rgba(0,0,0,0.075);
    box-shadow: 0 1px 2px rgba(0,0,0,0.075);
    margin-bottom: 10px;
    padding-left: 0;
    min-height: 85px !important;
    cursor: default;
        border: 1px solid #ddd;
        font-weight: 700;

    
}

.results_menu_details:hover
{
  background-color: #E9EBEE;
}


.menu_itm_area
{
      
    width: 75%;
    float: right;
    padding-left: 30px;
  
}
.cat_sub
{
  float: left;
    width: 20%;
   margin-left: 10px;
    display: inline-block;
}
.cat_sub a
{
  padding-top: 10px;
   font-size: 15px;
   margin-left: 20px;
   text-decoration: none;
   color: #906767;
 }


.cart_right
{
      background-color: white;
    color: black;
    display: inline-block;
    float: right;
    width: 20%;
    font-weight: 700;
}


.cat_head
{
 background-color:#EDAF40;
    font-size: 20px;
    padding: 5px;
    border-radius: 5px;
    text-align: center;
}
.itmname
{
  display: inline-block;
  padding: 10px;
}
.itmprice{
  display: inline-block;
  float: right;
  padding-right: 20px;
  padding-top: 10px;
  font-size: 15px;
 }

.itmcatg
{
  display: inline-block;
  padding: 10px;
}


  body{
    background-color: #fff;
  }
.body_wrap_one
{
  width: 100%;
  height: auto;
  margin-top: 20px;
  color: #434343;
  background-color: #fff;
}

.link_area
{
  margin: 0 auto;
}
.link_area form input[type=submit]
{
  background-color: #fff;
}

.link_area form
{
  margin-left: 10px;
}

.link_area form input[type=submit]
{
  width: 30%;
  padding: 12px 180px 12px 30px;
  color: #434343;
  text-align: center;
  cursor: pointer;
  padding-left: 10px;
}


.link_area form input[type=submit]:focus
{
  background: #32cd32;
    padding: 12px 180px 12px 30px;
    color: #fff;
}

.comment_area
{
  font-size: 18px;
  font-weight: 700;
}
.database_content
{
  margin-top: 20px;
}

/*cart header....................*/

.cart_content{

font-size: 16px;
padding-top: 8px;
  font-family: calibiri, sans-serif;
}
.cart_content .itm_name{
width: 40%;
display: inline-block;
font-size: 15px;
padding-left: 5px;
}
.cart_content .quantity{
 
  display: inline-block;
  width: 10%;
  padding-left: 28px;

}
.cart_content .itm_price{
  width: 20%;
  display: inline-block;
  padding-left: 12px;
 

}
/*---------------subtotal-----------*/
.subtotal{
/*  position: relative;*/
  font-size: 20px;
  padding-top: 10px;
  color: #555;

}
.subtotal_cont{

  width: 45%;
  float: left;
  display: inline-block;
}
.item_total{
width: 40%;
padding-left: 100px;
}
.voc_code{
 border:2px solid #777;
 border-radius: 8px;

}
#voc{
  width: 64%;
  height: 35px;
  font-size: 17px;
  padding-left: 5px;
}
#voucher_code
{
  float: right;
  background-color:#27ae60;
  border-radius: 8px;
  color: white;
  font-size: 18px;
  width: 36%;
  height: 35px;
border-color: #aaa;
  font-weight: 600;
}
#voucher_code:hover{
background-color:#2ecc71;
}


.sublists{
 padding-top: 20px;
 font-weight: 500;
font-family:   helvetica, sans-serif;
}
.sublist{
  color: #c72f29;
padding-left: 40px;
padding-right: 40px;
font-size: 18px;
 
}
.sublist_cont{
display: inline-block;
}
.sub_val{
float: right;
display: inline-block;
}
.sublist1{
color: black;
 color: #333;
padding-left: 40px;
padding-right: 40px;
padding-top: 10px;
 font-size: 16px;
}
.sublist1_cont{
display: inline-block;
}
.sub1_val{
float: right;
display: inline-block;
}
.total{
  font-size: 28px;
  background-color: #d6d6d6;
  padding-left: 40px;
  color: #333;
  height: 45px;
 font-weight: 500;
  padding-right: 20px;
  padding-top: 10px;
font-family:  helvetica, sans-serif;
}
.cont{
  display: inline-block;
}
.val{
  float: right;
  display: inline-block;
}
#chkout
{

  width: 100%;
  color: white;
  background-color: #27ae60;
  border-radius: 10px;
  height: 50px;
  font-size: 16px;
/*  border:2px solid #888;*/
  box-shadow: 0px 4px 2px -2px rgba(0, 0, 0, 0.70);
    padding-bottom: 10px;
    padding-top: 8px;
font-family: Arial, 'Helvetica Neue', Helvetica, sans-serif;

}
#chkout:hover{
  background-color: #2ecc71;
}
#chkout:focus{
  background-color: #2ecc71;
}
#chk{
  box-shadow: 0px 4px 2px -2px rgba(0, 0, 0, 0.70);
    padding-bottom: 20px;
    padding-top: 20px;
    margin:0 auto;

}
.order_info
{
  font-size: 28px;
  text-align: center;
  color: #333;
  padding-top: 10px;
  padding-bottom: 20px;
}
.order_cont{
  font-size: 18px;
}
.avg_del_tm{
  display: inline-block;
padding-bottom:10px; 
}
.tm{
  display: inline-block;
  float: right;
  padding-top: 10px;
}


.cart_hd{
  font-size: 20px;
  font-family: helvetica, sans-serif;
  color: #555;
   padding: 10px;
  font-weight: 500;
}
.cart_hd .name{
width: 18%;
display: inline-block;
float: left;
padding-left: 10px;

}
.qlty{
 
  display: inline-block;
  width: 20%;
  padding-left: 30px;

}
 .price{
  width: 15%;
  display: inline-block;
  padding-left: 10px;
 
}

  </style>



<?php
session_start();
require_once("dbcontroller.php");
$db_handle = new DBController();


if(!empty($_POST["action"])) {
switch($_POST["action"]) {
	case "add":
		if(!empty($_POST["quantity"])) {
			$productByCode = $db_handle->runQuery("SELECT itm_name,itm_id,quantity,itm_price FROM khanaman.km_restr_menu WHERE itm_id='" . $_POST["itm_id"] . "'");

			$itemArray = array($productByCode[0]["itm_id"]=>array('itm_name'=>$productByCode[0]["itm_name"], 'itm_id'=>$productByCode[0]["itm_id"], 'quantity'=>$_POST["quantity"], 'itm_price'=>$productByCode[0]["itm_price"]));
			

			if(!empty($_SESSION["cart_item"])) {
				
                                $code_value=$productByCode[0]["itm_id"];
                                $code_array = array('itm_id'=>"");

                                foreach($_SESSION["cart_item"] as $k => $v) {
                                          array_push($code_array,$_SESSION["cart_item"][$k]["itm_id"]);
					}


				if(in_array($productByCode[0]["itm_id"],$code_array)) {


					foreach($_SESSION["cart_item"] as $k => $v) {
							if($productByCode[0]["itm_id"] == $k)
								$_SESSION["cart_item"][$k]["quantity"] += $_POST["quantity"];

                                        if($_SESSION["cart_item"][$k]["quantity"]<=0)
                                        {
					if($_POST["itm_id"] == $k)
						unset($_SESSION["cart_item"][$k]);
					if(empty($_SESSION["cart_item"]))
						unset($_SESSION["cart_item"]);
                                        }
					}



				} else {
					
					echo $_SESSION["cart_item"][0];

					$_SESSION["cart_item"] = array_merge($_SESSION["cart_item"],$itemArray);
				}
			} else {
			
			
				$_SESSION["cart_item"] = $itemArray;
			}
		}
	break;
	case "remove":
		if(!empty($_SESSION["cart_item"])) {
			foreach($_SESSION["cart_item"] as $k => $v) {
					if($_POST["itm_id"] == $k)
						unset($_SESSION["cart_item"][$k]);
					if(empty($_SESSION["cart_item"]))
						unset($_SESSION["cart_item"]);
			}
		}
	break;
	case "empty":
		unset($_SESSION["cart_item"]);
	break;}}
?>
<?php
if(isset($_SESSION["cart_item"])){
    $item_total = 0;
?>

 <div id="cart-item">
  <div id="shopping-cart">
	 <div class="cart_hd">
      <div class="name" >Name</div>&nbsp;&nbsp;&nbsp;&nbsp;
      <div class="qlty" >Quality</div>&nbsp;&nbsp;&nbsp;&nbsp;
      <div class="price" >Price</div>&nbsp;&nbsp;&nbsp;&nbsp;
     </div>	


		<?php	
			$cart=$_SESSION["cart_item"];
   	 		foreach ($_SESSION["cart_item"] as $item){
		?>
		

  <div class="cart_content">
      <div class="itm_name"><?php echo $item["itm_name"]; ?><br>
      <center><i class="fa fa-plus-circle" onClick="cartAction('add','<?php echo $item["itm_id"]; ?>','')" class="btnRemoveAction cart-action" style="color:#27ae60;font-size:22px;padding-top:8px;"></i>&nbsp;&nbsp;<i class="fa fa-minus-circle" onClick="cartAction('add','<?php echo $item["itm_id"]; ?>','-')" class="btnRemoveAction cart-action" style="color:#c72f29;font-size:22px;"></i></center></div>

      <div class="quantity" ><?php echo $item["quantity"]; ?></div>&nbsp;&nbsp;&nbsp;&nbsp;
      <div class="itm_price" ><?php echo "₹".$item["itm_price"]; ?></div>&nbsp;&nbsp;&nbsp;&nbsp;
  </div>

		<br>
		<br>
	
			<!-- <td><a onClick="cartAction('remove','<?php echo $item["itm_id"]; ?>','')" class="btnRemoveAction cart-action">Remove Item</a></td> -->
			<?php
        $item_total += ($item["itm_price"]*$item["quantity"]);
		}
		?></div>
<div class="subtotal">
  <center><div class="subtotal_cont">Subtotal&nbsp;&nbsp;:</div></center>
 <center> <div class="item_total"><?php echo "₹".$item_total; ?></div></center>
</div>

<br>


	
	
	
<div id="chk"><input type="submit" name="checkout" onClick="location.href='useredit.php'" value=" PROCEED TO CHECKOUT" id="chkout"></div>

 <?php
}
?>
		


<!-- <input type=button onClick="location.href='useredit.php'" value='Checkout'>
  -->
 
<!--
<div class="order_info">Order Info</div>

<div class="order_cont">

<div class="avg_del_tm"><i class="fa fa-clock-o"style="font-size:30px;"></i>&nbsp;&nbsp;Average Delivery Time&nbsp;&nbsp;:</div><div class="tm">30&nbsp;mins</div>
<div class="avg_del_tm"><i class="fa fa-inr"style="font-size:30px;"></i>&nbsp;&nbsp;&nbsp;&nbsp;Minimum Order&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:</div><div class="tm">Rs.&nbsp;200</div>

</div>


<br><br>-->
</div>